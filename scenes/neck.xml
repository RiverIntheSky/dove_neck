<scene version='2.0.0'>

  <default name="spp" value="256"/>

  <integrator type="path"/>

  <sensor type="perspective">

    <transform name="to_world">
      <lookat target="0.13, .07, 0.0"
              origin=".0, 0, 0.61"
              up    ="0.0, -1.0, 0.0"/>
    </transform>

    <film type="hdrfilm">
      <integer name="width" value="1024"/>
      <integer name="height" value="768"/>
      <string name="pixel_format" value="rgb"/>
      <string name="component_format" value="float32"/>
      <rfilter type="gaussian"/>
    </film>

    <sampler type="ldsampler">
      <integer name="sample_count" value="$spp"/>
    </sampler>
  </sensor>

  <bsdf type="barbulebsdf" id="dove">
    <string name="film_ior" value="keratin"/>
    <string name="ext_ior" value="air"/>
    <float name="b" value="0.25"/>
    <float name="mu" value="-0.35"/>
  </bsdf>

  <!-- feather -->
  <shape type="feather">
    <string name="filename" value="feathers/feathers.ply"/>
    <vector name="roughness" value="0, 0.07, 0.02"/>
    <ref id="dove"/>
    <float name="radius" value="0.01"/>
    <transform name="to_world">
      <scale value="0.1"/>
      <translate x="0.08"/>
    </transform>
  </shape>

  <emitter type="constant">
    <spectrum name="radiance" value="0.2"/>
  </emitter>

  <!-- area light -->
  <shape type="rectangle">
    <transform name="to_world">
      <scale x="0.5" y="0.05" z="0.5"/>
      <rotate y="1" angle="180"/>
      <translate  z="1"/>
    </transform>
    <bsdf type="diffuse" id="light">
      <spectrum name="reflectance" value="400:0.78, 500:0.78, 600:0.78, 700:0.78"/>
    </bsdf>
    <emitter type="area">
      <spectrum name="radiance" value="10"/>
    </emitter>
  </shape>


</scene>
